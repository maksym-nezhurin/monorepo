# Monorepo Microservice Application

## –û–ø–∏—Å

–¶–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π ‚Äî **–º–æ–Ω–æ—Ä–µ–ø–æ** –¥–ª—è –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–Ω–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –∑ –Ω–∞—Å—Ç—É–ø–Ω–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é:


---

## üõ†Ô∏è –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

| –ö–∞—Ç–∞–ª–æ–≥         | –û–ø–∏—Å                                                                 |
|-----------------|----------------------------------------------------------------------|
| `apps/`         | –ö–ª—ñ—î–Ω—Ç—Å—å–∫—ñ –¥–æ–¥–∞—Ç–∫–∏ (Next.js —Ç–∞ React)                                |
| `config/env/`   | –®–∞–±–ª–æ–Ω–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π `.env`                                           |
| `infrastructure/keycloak/` | –°–µ—Ä–≤—ñ—Å Keycloak –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—ó –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó |
| `services/`     | –ú—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–∏: –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —à–ª—é–∑           |
| `scripts/`      | Bash-—Å–∫—Ä–∏–ø—Ç–∏ –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, –∑–∞–ø—É—Å–∫—É —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó              |

---

## üì¶ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```bash
git clone https://your.repo.url.git
cd monorepo
bash scripts/setup.sh
```
---

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

- **Keycloak** ‚Äî —Å–µ—Ä–≤–µ—Ä –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω–∏–π –≤ `infrastructure/keycloak`.
- **Frontend:**
  - `apps/client` ‚Äî Next.js –∫–ª—ñ—î–Ω—Ç.
  - `apps/admin` ‚Äî React –∞–¥–º—ñ–Ω–∫–∞.
- **Backend:**
  - –†—ñ–∑–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ (`auth`, `user`, `notification`, `gateway`) –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ `services`.
- **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
  - –ó–∞–≥–∞–ª—å–Ω—ñ `.env.template` –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `config/env`.
- **–°—Ü–µ–Ω–∞—Ä—ñ—ó:**
  - –°–∫—Ä–∏–ø—Ç–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –∫–ª–æ–Ω—É–≤–∞–Ω–Ω—è, –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó `.env` —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å.

---

## üìã –Ø–∫ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –ø—Ä–æ–µ–∫—Ç–æ–º

<details>
 <summary>

 ### üîß –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
 </summary>

 ```markdown
./scripts/setup.sh
```

- –ö–ª–æ–Ω—É—î –≤—Å—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø—ñ–¥–ø—Ä–æ—î–∫—Ç–∏ —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –ø–∞–ø–∫–∏

- –ö–æ–ø—ñ—é—î —à–∞–±–ª–æ–Ω .env.template —É .env –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É —Ç–∞ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
 
</details>

<details>
 <summary>

 ### üê≥ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –∑ Docker Compose
 </summary>

–ó–∞–ø—É—Å–∫ —É—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ (Keycloak, backend, frontend):
 ```markdown
make dev
```
 
</details>

<details>
 <summary>

 ### üõ°Ô∏è –Ü–º–ø–æ—Ä—Ç Realm —É Keycloak
 </summary>

Keycloak –ø—ñ–¥—Ç—Ä–∏–º—É—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —ñ–º–ø–æ—Ä—Ç realm —á–µ—Ä–µ–∑ –æ–ø—Ü—ñ—é --import-realm —É Docker Compose.

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—ñ—Å–ª—è —Å—Ç–∞—Ä—Ç—É Keycloak), –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:
 ```markdown
./scripts/import-realm.sh
```
–°–∫—Ä–∏–ø—Ç:

- –ß–µ–∫–∞—î –∑–∞–ø—É—Å–∫—É Keycloak

- –ê–≤—Ç–æ—Ä–∏–∑—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ Keycloak Admin CLI

- –Ü–º–ø–æ—Ä—Ç—É—î realm —ñ–∑ —Ñ–∞–π–ª—É:
infrastructure/keycloak/realm-export.json
 
</details>

<details>
 <summary>

 ### ‚öôÔ∏è –†–æ–∑—Ä–æ–±–∫–∞ —Ç–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
 </summary>

Keycloak –ø—ñ–¥—Ç—Ä–∏–º—É—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —ñ–º–ø–æ—Ä—Ç realm —á–µ—Ä–µ–∑ –æ–ø—Ü—ñ—é --import-realm —É Docker Compose.

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—ñ—Å–ª—è —Å—Ç–∞—Ä—Ç—É Keycloak), –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:
 ```markdown
./scripts/import-realm.sh
```
–°–∫—Ä–∏–ø—Ç:

- –î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏:
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ ```docker-compose.override.yml```, –¥–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π <b>hot-reload</b> —Ç–∞ –ª–æ–∫–∞–ª—å–Ω—ñ —Ç–æ–º–∏.

- –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É:
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –±–∞–∑–æ–≤–∏–π ```docker-compose.yml``` –∑ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–º–∏ –æ–±—Ä–∞–∑–∞–º–∏.
 
</details>

### üêã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker Compose
- –ö–æ–∂–µ–Ω –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å ‚Äî –æ–∫—Ä–µ–º–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

- Keycloak ‚Äî –æ–∫—Ä–µ–º–∏–π —Å–µ—Ä–≤—ñ—Å

- Frontend —ñ backend –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ –¥–æ —Å–ø—ñ–ª—å–Ω–æ—ó –º–µ—Ä–µ–∂—ñ myapp-network

- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è volume –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö Keycloak (keycloak_data)

### üßô‚Äç‚ôÇÔ∏è –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Realm –ø—ñ—Å–ª—è –ø—ñ–¥–Ω—è—Ç—Ç—è Keycloak

```bash
create-realm.sh

chmod +x create-realm.sh

./create-realm.sh my-new-realm

```

–ö—Ä–µ–¥–µ–Ω—à—ñ–∞–ª–∏: admin / admin (–∞–±–æ –∑–º—ñ–Ω—ñ—Ç—å —É —Å–∫—Ä–∏–ø—Ç—ñ)

### üë§ –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ Realm

```
chmod +x create-realm-user.sh
./create-realm-user.sh application john_doe john@example.com test
```

### üì¨ –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
–Ø–∫—â–æ –≤–∏–Ω–∏–∫–Ω—É—Ç—å –ø–∏—Ç–∞–Ω–Ω—è ‚Äî –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—å –¥–æ –∞–≤—Ç–æ—Ä–∞ –ø—Ä–æ—î–∫—Ç—É: –ú–∞–∫—Å–∏–º –ù–µ–∂—É—Ä—ñ–Ω